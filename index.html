<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Design Layout Generator</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<!-- External stylesheets for modular CSS -->
<link rel="stylesheet" href="css/base.css">
<link rel="stylesheet" href="css/layout.css">
<link rel="stylesheet" href="css/components.css">
</head>
<body>
<div class="app">
  <!-- Minimal analog clock -->
  <div class="clock">
    <div class="clock-face">
      <div class="clock-hand hour-hand" id="hour-hand"></div>
      <div class="clock-hand minute-hand" id="minute-hand"></div>
      <div class="clock-center"></div>
    </div>
  </div>
  
  <!-- Left controls -->
  <div class="sidebar">
    <!-- AI Generation - Hero Section -->
    <section class="sidebar-section hero-section">
      <h2>AI Generate</h2>
      <textarea id="aiPrompt" placeholder="Describe your design idea...">Design a minimalist concert poster for jazz festival with vintage typography</textarea>
      
      <div class="style-selector">
        <label>Style</label>
        <select id="styleSelect" onchange="handleStyleChange()">
          <option value="b7f1e039-5fb5-47fa-b46e-d886bc87e36c">Style 1</option>
          <option value="402084c3-fbb5-4fe1-8a32-ecdfd3463a39">Style 2</option>
          <option value="72b21ce1-77f0-466e-877a-c3c6bb708e0c">Style 3</option>
          <option value="e85e0f16-e82e-4053-8080-ffd55fa8ecb6">Style 4</option>
          <option value="226190a0-5c43-4e0c-98a0-1a4ba63800cd">Style 5</option>
          <option value="41501ef8-26a6-4d1c-946c-d8b659ff11c3">Style 6</option>
          <option value="custom">Custom Style ID</option>
        </select>
        <input id="customStyleId" type="text" placeholder="Enter custom style ID..." class="custom-style-input">
      </div>
      
      <button onclick="generateWithAI()" id="generateBtn" class="btn-primary">Generate Design</button>
      
      <!-- Status indicators -->
      <div id="aiStatus" class="status-box status-loading">
        <div id="statusText">Preparing...</div>
        <div id="statusProgress" class="progress-bar">
          <div id="progressBar" class="progress-fill"></div>
        </div>
      </div>
      
      <div id="aiError" class="status-box status-error">
        <div id="errorText"></div>
        <button onclick="retryGeneration()" id="retryBtn" class="btn-retry">Retry</button>
      </div>
    </section>
    
    <!-- Canvas Elements -->
    <section class="sidebar-section">
      <h3>Canvas Elements</h3>
      <div id="blockList" class="element-list"></div>
    </section>
    
    <!-- Layout Controls -->
    <section class="sidebar-section">
      <h3>Layout</h3>
      <div class="control-group">
        <label>Format</label>
        <select id="format">
          <option value="16-9" selected>16:9 Landscape</option>
          <option value="1-1">1:1 Square</option>
          <option value="a4">A4 Portrait</option>
          <option value="a4landscape">A4 Landscape</option>
        </select>
      </div>
      
      <div class="action-buttons">
        <button onclick="render()" class="btn-secondary">Recompose</button>
        <button onclick="shuffleColors()" id="shuffleBtn" class="btn-tertiary">Shuffle Colors</button>
      </div>
    </section>
    
    <!-- Add Elements - Collapsible -->
    <section class="sidebar-section collapsible">
      <button class="section-toggle" onclick="toggleSection('add-elements')">
        <h3>Add Elements</h3>
        <span class="toggle-icon">−</span>
      </button>
      
      <div id="add-elements" class="section-content">
        <div class="add-group">
          <label>Text Block</label>
          <div class="input-row">
            <input id="textContent" type="text" placeholder="Enter text...">
            <select id="textType">
              <option value="header">Header</option>
              <option value="subheader">Subheader</option>
              <option value="body">Body</option>
              <option value="logo">Logo</option>
            </select>
          </div>
          <button onclick="addTextBlock()" class="btn-tertiary">Add Text</button>
        </div>

        <div class="add-group">
          <label>Image</label>
          <input id="imageFile" type="file" accept="image/*" onchange="addImageBlock()">
          <div class="checkbox-group">
            <label class="checkbox-label"><input id="useImageColors" type="checkbox" checked> Use image colors</label>
            <label class="checkbox-label"><input id="preserveAspect" type="checkbox"> Preserve aspect</label>
          </div>
        </div>
      </div>
    </section>

    <!-- Colors - Simplified -->
    <section class="sidebar-section collapsible">
      <button class="section-toggle" onclick="toggleSection('colors')">
        <h3>Colors</h3>
        <span class="toggle-icon">−</span>
      </button>
      
      <div id="colors" class="section-content">
        <div class="color-grid">
          <div class="color-item">
            <label>Background</label>
            <input id="bgColor" type="color" value="#ffffff" onchange="applyColors()">
          </div>
          <div class="color-item">
            <label>Text</label>
            <input id="textColor" type="color" value="#111111" onchange="applyColors()">
          </div>
          <div class="color-item">
            <label>Accent</label>
            <input id="accentColor" type="color" value="#111111" onchange="applyColors()">
          </div>
        </div>
        <div id="colorPalette" class="color-palette"></div>
      </div>
    </section>
  </div>

  <!-- Right preview -->
  <div class="preview" id="preview">
    <div id="scaler">
      <div id="canvas"></div>
    </div>
  </div>
</div>

<!-- Modular JavaScript imports -->
<script type="module" src="js/main.js"></script>
</body>
</html>